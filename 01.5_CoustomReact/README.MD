# ğŸ§¬ Understanding React: Custom React Implementation & JSX Internals

---

## ğŸ¯ Building a Custom React Library

This tutorial demonstrates how React works internally by building a simplified version from scratch.

---

## ğŸ“ Custom React Implementation

### ğŸŒ **HTML Structure**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom React App</title>
  </head>
  <body>
    <div class="root"></div>
    <script src="./script.js"></script>
  </body>
</html>
```

### ğŸ”§ **JavaScript Implementation**

```javascript
// Custom React function to create DOM elements
function CreateReact(reactElement, container) {
  // Create DOM element based on type
  let el = document.createElement(reactElement.type);

  // Set all attributes from props
  for (let key in reactElement.props) {
    el.setAttribute(key, reactElement.props[key]);
  }

  // Set text content
  el.innerHTML = reactElement.children;

  // Append to container
  container.appendChild(el);
}

// React element structure (how React sees JSX internally)
let reactElement = {
  type: "a", // HTML tag type
  props: {
    // Element attributes
    href: "https://google.com",
    target: "_blank",
  },
  children: "Click me", // Text content
};

// Get root container and render
let root = document.querySelector(".root");
CreateReact(reactElement, root);
```

---

## ğŸŒ³ React Element Structure

React converts all JSX into **objects** that represent a **virtual tree structure**.

### ğŸ“Š **React Element Anatomy**

```javascript
let reactElement = {
  type: "tagName", // 1. Element type (a, div, h1, etc.)
  props: {
    // 2. Properties/attributes object
    attribute1: "value1",
    attribute2: "value2",
  },
  children: "content", // 3. Text content or child elements
};
```

### ğŸ”„ **JSX to Object Conversion**

**JSX Code:**

```jsx
<a href="https://google.com" target="_blank">
  Click me
</a>
```

**React sees it as:**

```javascript
{
  type: "a",
  props: {
    href: "https://google.com",
    target: "_blank"
  },
  children: "Click me"
}
```

---

## âš¡ Why Bundlers Are Essential

### ğŸ”„ **The Translation Process**

1. **You write**: JSX (HTML-like syntax)
2. **Bundler converts**: JSX â†’ JavaScript objects
3. **React processes**: Objects â†’ Virtual DOM
4. **Browser renders**: Virtual DOM â†’ Real DOM

### ğŸ› ï¸ **Bundler's Job**

- **Syntax Correction**: Converts JSX to valid JavaScript
- **Import Resolution**: Handles module imports
- **Optimization**: Minifies and optimizes code
- **Compatibility**: Ensures browser compatibility

> **Important**: React doesn't understand HTML directly â€” that's why it's called **JSX** (JavaScript XML)

---

## ğŸ—ï¸ Real React Implementation

### ğŸ“ **Using React.createElement()**

```javascript
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import React from "react";

let name = "krish";

// Creating element using React.createElement
const createEl = React.createElement(
  "a", // 1. Tag name
  { href: "https://youtube.com", target: "_blank" }, // 2. Props object
  "Click me" // 3. Text content
);

createRoot(document.getElementById("root")).render(
  <StrictMode>
    {createEl}
    <h1>Hello, my brother's name is {name}</h1>
  </StrictMode>
);
```

---

## ğŸ§® JavaScript Expressions in JSX

### âœ… **What Works in `{}`**

```jsx
const App = () => {
  const name = "Krish";
  const age = 25;
  const isLoggedIn = true;

  return (
    <>
      <h1>Name: {name}</h1> {/* âœ… Variables */}
      <p>Age: {age + 5}</p> {/* âœ… Expressions */}
      <p>Status: {isLoggedIn ? "Online" : "Offline"}</p> {/* âœ… Ternary */}
      <p>Time: {new Date().toLocaleTimeString()}</p> {/* âœ… Function calls */}
      <p>Random: {Math.random()}</p> {/* âœ… Math operations */}
    </>
  );
};
```

### âŒ **What Doesn't Work in `{}`**

```jsx
const App = () => {
  return (
    <>
      {/* âŒ Control structures don't work directly */}
      {/* {if (true) { return "Hello" }} */}
      {/* {for (let i = 0; i < 5; i++) { console.log(i) }} */}

      {/* âœ… Use these alternatives instead */}
      {true && <p>Conditional rendering</p>}
      {[1, 2, 3].map((num) => (
        <span key={num}>{num}</span>
      ))}
    </>
  );
};
```

---

## ğŸ” JSX Rules & Expressions

### ğŸ“ **JSX Expression Rules**

| Feature                   | Description                           | Example                       |
| ------------------------- | ------------------------------------- | ----------------------------- |
| **Evaluated Expressions** | Stores final outcome only             | `{name}`, `{2 + 3}`           |
| **No Statements**         | Can't use if/else, loops directly     | Use ternary, `&&`, `.map()`   |
| **Function Calls**        | Can call functions that return values | `{getName()}`                 |
| **Objects**               | Must be serializable                  | `{user.name}` âœ…, `{user}` âŒ |

### ğŸ’¡ **Working with Complex Logic**

**âŒ Won't work:**

```jsx
<div>
  {
    if (user.isLoggedIn) {
      return <p>Welcome!</p>
    }
  }
</div>
```

**âœ… Use instead:**

```jsx
<div>{user.isLoggedIn ? <p>Welcome!</p> : <p>Please login</p>}</div>;

{
  /* Or for more complex logic */
}
<div>{user.isLoggedIn && <p>Welcome!</p>}</div>;
```

---

## ğŸ”§ Optimized Custom React Function

### ğŸ“ **Improved Version**

```javascript
function CreateReact(reactElement, container) {
  // Create element
  let el = document.createElement(reactElement.type);

  // Set attributes dynamically (no repetition)
  for (let key in reactElement.props) {
    if (key === "className") {
      el.setAttribute("class", reactElement.props[key]);
    } else if (key.startsWith("on")) {
      // Handle events
      el.addEventListener(key.slice(2).toLowerCase(), reactElement.props[key]);
    } else {
      el.setAttribute(key, reactElement.props[key]);
    }
  }

  // Handle children (can be string or array)
  if (typeof reactElement.children === "string") {
    el.innerHTML = reactElement.children;
  } else if (Array.isArray(reactElement.children)) {
    reactElement.children.forEach((child) => {
      if (typeof child === "string") {
        el.appendChild(document.createTextNode(child));
      } else {
        CreateReact(child, el); // Recursive for nested elements
      }
    });
  }

  container.appendChild(el);
}
```

---

## ğŸ¯ Key Differences: Custom vs Real React

| Aspect                  | Custom React               | Real React                |
| ----------------------- | -------------------------- | ------------------------- |
| **Virtual DOM**         | âŒ Direct DOM manipulation | âœ… Virtual DOM diffing    |
| **Re-rendering**        | âŒ Manual updates          | âœ… Automatic optimization |
| **Event Handling**      | âŒ Basic addEventListener  | âœ… SyntheticEvents        |
| **State Management**    | âŒ None                    | âœ… useState, useEffect    |
| **Component Lifecycle** | âŒ None                    | âœ… Full lifecycle methods |
| **Performance**         | ğŸŒ Slower for complex apps | âš¡ Optimized algorithms   |

---

## ğŸ—ï¸ React App Architecture

### ğŸ“Š **How React Apps Work**

```
1. JSX Code (Developer writes)
        â†“
2. Bundler (Babel/TypeScript transforms)
        â†“
3. React.createElement() calls
        â†“
4. Virtual DOM objects
        â†“
5. React reconciliation
        â†“
6. Real DOM updates
```

### ğŸ›ï¸ **App Function in main.jsx**

```jsx
// main.jsx
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App.jsx";

function MyApp() {
  return (
    <div>
      <h1>Custom App Component</h1>
      <App />
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<MyApp />);
```

---

## âœ¨ Key Takeaways

- **ğŸ§¬ React Elements**: JSX gets converted to JavaScript objects with `type`, `props`, and `children`
- **ğŸ› ï¸ Bundlers**: Essential for converting JSX to browser-compatible JavaScript
- **ğŸŒ³ Virtual DOM**: React uses object representation before touching real DOM
- **ğŸ§® Expressions Only**: JSX `{}` accepts expressions, not statements
- **âš¡ React.createElement()**: The actual function behind JSX syntax
- **ğŸ”„ No Direct HTML**: React doesn't understand HTML â€” only JSX/JavaScript objects
- **ğŸ“Š Performance**: Real React optimizes with Virtual DOM diffing algorithms
- **ğŸ¯ Final Outcome**: JSX expressions store evaluated results, not code

---
